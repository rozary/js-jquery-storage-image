/*! github 2015-02-05 */
!function(){$.fn.storageImage=function(a,b){"use strict";b||(b="");var c=$(this).selector.slice(1),d=function(a,b){if(!b)return console.log("no data_img"),1;var c=a.tagName;if("DIV"==c)$(a).css("background-image","url("+b+")");else if("IMG"==c)return a.src=b,1;return 1};return this.each(function(){var e=$(this).get(0),f=sessionStorage;if(!f)return 1;if(-1!=navigator.userAgent.search(/Android 2.[123]/))return d(e,a),1;var g,h,i=this.id;if(i?h=this.id:c&&(h=c),h=h+"_"+b,g=f.getItem(h))d(e,g);else{var j=new Image,i=this.id;j.src=a;var k;i?($(this).after('<canvas id="canvas_'+this.id+'" style="display:none"></canvas>'),k=$("#canvas_"+this.id).get(0)):c&&($(this).after('<canvas class="canvas_'+c+'" style="display:none"></canvas>'),k=$(".canvas_"+c).get(0));var l=k.getContext("2d");j.onload=function(){k.width=j.width,k.height=j.height,l.drawImage(j,0,0),g=k.toDataURL();try{f.setItem(h,g)}catch(b){"QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name?(f.clear(),g=a):console.log(b)}d(e,g)}}})}}(jQuery);